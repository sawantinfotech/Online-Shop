<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Email - Mobile Shop</title>
    <link href="https://cdn.replit.com/agent/bootstrap-agent-dark-theme.min.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-4">
        <div class="row">
            <div class="col-md-8">
                <h2>Email System Test</h2>
                
                <div class="card mb-4">
                    <div class="card-body">
                        <h5 class="card-title">Email Configuration Status</h5>
                        <table class="table table-sm">
                            <tr>
                                <td><strong>SMTP Server:</strong></td>
                                <td>{{ email_settings.smtp_server }}</td>
                            </tr>
                            <tr>
                                <td><strong>SMTP Port:</strong></td>
                                <td>{{ email_settings.smtp_port }}</td>
                            </tr>
                            <tr>
                                <td><strong>Email Address:</strong></td>
                                <td>{{ email_settings.email_address or 'Not configured' }}</td>
                            </tr>
                            <tr>
                                <td><strong>Configuration Status:</strong></td>
                                <td>
                                    {% if email_settings.email_configured %}
                                        <span class="badge bg-success">Configured</span>
                                    {% else %}
                                        <span class="badge bg-danger">Not Configured</span>
                                    {% endif %}
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>

                {% if email_settings.email_configured %}
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">Send Test Email</h5>
                        <form method="POST">
                            <div class="mb-3">
                                <label for="test_email" class="form-label">Test Email Address</label>
                                <input type="email" class="form-control" id="test_email" name="test_email" required>
                                <div class="form-text">Enter an email address to send a test email</div>
                            </div>
                            <button type="submit" class="btn btn-primary">Send Test Email</button>
                        </form>
                    </div>
                </div>
                {% else %}
                <div class="alert alert-warning" role="alert">
                    <h5 class="alert-heading">Email Not Configured</h5>
                    <p>To enable email functionality, you need to configure the following environment variables:</p>
                    <ul>
                        <li><strong>EMAIL_ADDRESS</strong> - Your email address (Gmail account)</li>
                        <li><strong>EMAIL_PASSWORD</strong> - Your email password or app password</li>
                        <li><strong>SMTP_SERVER</strong> - SMTP server (default: smtp.gmail.com)</li>
                        <li><strong>SMTP_PORT</strong> - SMTP port (default: 587)</li>
                    </ul>
                    <p class="mb-0">For Gmail, you'll need to use an App Password instead of your regular password.</p>
                </div>
                {% endif %}

                <div class="card mt-4">
                    <div class="card-body">
                        <h5 class="card-title">Email Features</h5>
                        <p>When configured, the email system will handle:</p>
                        <ul>
                            <li>Order confirmation emails to customers</li>
                            <li>Payment confirmation notifications</li>
                            <li>Order status update emails</li>
                            <li>Invoice delivery via email</li>
                            <li>Business verification status emails</li>
                        </ul>
                    </div>
                </div>

                <div class="mt-3">
                    <a href="{{ url_for('dashboard') }}" class="btn btn-secondary">Back to Dashboard</a>
                </div>
            </div>
        </div>
    </div>
</body>
</html>